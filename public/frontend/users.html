<!doctype html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Usuarios</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"><link href="css/exact-style.css" rel="stylesheet"><script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script></head><body x-data="usersPage()" x-init="load()"><div class="header"><img src="assets/logo1.png" class="logo"><img src="assets/logo2.png" class="logo"><div style="margin-left:auto"><button class="btn btn-outline-dark" @click="logout()">Salir</button></div></div><div class="container-fluid"><div class="row"><div class="col-2"><div class="sidebar"><a href="dashboard.html">Inicio</a><a href="products.html">Productos</a><a href="requests.html">Solicitudes</a><a href="reports.html">Reportes</a></div></div><div class="col-9"><div class="card-panel"><div class="d-flex justify-content-between"><h3>Usuarios</h3><button class="btn btn-primary" @click="openNew()">Nuevo usuario</button></div><table class="table table-soft mt-3"><thead><tr><th>ID</th><th>Nombre</th><th>Email</th><th>Rol</th><th>Activo</th><th>Acción</th></tr></thead><tbody><template x-for="u in users" :key="u.id"><tr><td x-text="u.id"></td><td x-text="u.name"></td><td x-text="u.email"></td><td x-text="u.role"></td><td x-text="u.active? 'Sí':'No'"></td><td><button class="btn btn-sm btn-secondary" @click="edit(u)">Editar</button><button class="btn btn-sm btn-danger" @click="toggle(u)"><span x-text="u.active? 'Dar baja':'Activar'"></span></button></td></tr></template></tbody></table></div></div></div></div><script src="js/app.js"></script><script>function usersPage(){return {users:[],modal:false,form:{},async load(){const r=await apiFetch('/users','GET');if(r.ok)this.users=r.data;},logout(){localStorage.removeItem('token');window.location='index.html';},openNew(){this.form={};this.modal=true;},edit(u){this.form=Object.assign({},u);this.modal=true;},async save(){if(this.form.id)await apiFetch('/users/'+this.form.id,'PUT',this.form);else await apiFetch('/users','POST',this.form);this.modal=false;this.load();},async toggle(u){await apiFetch('/users/'+u.id+'/toggle','POST');this.load();}}}</script></body></html>